{
    "const": {
        "max_peers": 32,
        "command_buffer": 64,
        "pool_size": 262144,
        "command_data": 64
    },
    "sizeof": {
        "bool": 1,
        "char": 1,
        "int": 4,
        "pid_t": 4,
        "time_t": 4,
        "unsigned": 4,
        "unsigned long": 4,
        "pthread_mutex_t": 24
    },
    "proto": {
        "peer_data_s": [
            {
                "type": "bool",
                "name": "free"
            },
            {
                "type": "pid_t",
                "name": "pid"
            },
            {
                "type": "unsigned long",
                "name": "starttime"
            }
        ],
        "command_s": [
            {
                "type": "unsigned",
                "name": "command_number"
            },
            {
                "type": "unsigned",
                "name": "peer_mask"
            },
            {
                "type": "unsigned",
                "name": "sender"
            },
            {
                "type": "unsigned long",
                "name": "payload_offset"
            },
            {
                "type": "unsigned",
                "name": "payload_size"
            },
            {
                "type": "unsigned",
                "name": "cmd_type"
            },
            {
                "type": "char[]",
                "size": "command_data",
                "name": "cmd_data"
            }
        ],
        "ipc_memory_s": [
            {
                "type": "pthread_mutex_t",
                "name": "mutex"
            },
            {
                "type": "unsigned",
                "name": "peer_count"
            },
            {
                "type": "unsigned long",
                "name": "command_count"
            },
            {
                "type": "proto.peer_data_s[]",
                "size": "max_peers",
                "name": "peer_data"
            },
            {
                "type": "proto.command_s[]",
                "size": "command_buffer",
                "name": "commands"
            },
            {
                "type": "char[]",
                "size": "pool_size",
                "name": "pool"
            },
            {
                "type": "user.server",
                "name": "global_data"
            },
            {
                "type": "user.client[]",
                "size": "max_peers",
                "name": "peer_user_data"
            }
        ]
    },
    "user": {
        "server": [
            {
                "type": "unsigned",
                "name": "magic_number"
            }
        ],
        "client": [
            {
        		"type": "char[]",
                "size": 32,
        		"name": "name"
        	},
        	{
        		"type": "char[]",
                "size": 22,
        		"name": "server"
        	},
        	{
        		"type": "unsigned",
        		"name": "friendid"
        	},
        	{
        		"type": "bool",
        		"name": "connected"
        	},
        	{
        		"type": "bool",
        		"name": "good"
        	},
        	{
        		"type": "int",
        		"name": "health"
        	},
        	{
        		"type": "int",
        		"name": "health_max"
        	},
        	{
        		"type": "char",
        		"name": "life_state"
        	},
        	{
        		"type": "int",
        		"name": "team"
        	},
        	{
        		"type": "int",
        		"name": "clazz"
        	},
        	{
        		"type": "int",
        		"name": "score"
        	},
        	{
        		"type": "int",
        		"name": "last_score"
        	},
        	{
        		"type": "int",
        		"name": "total_score"
        	},
        	{
        		"type": "time_t",
        		"name": "heartbeat"
        	}
        ]
    }
}
